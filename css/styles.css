        :root {
            --bg: #0b1220;
            --card: #0f172a;
            --text: #e2e8f0;
            --muted: #94a3b8;
            --accent: #22d3ee;
            --ok: #34d399;
            --warn: #f59e0b;
            --err: #ef4444;
            --border: #1f2a44;
        }

        @media (prefers-color-scheme:light) {
            :root {
                --bg: #f8fafc;
                --card: #fff;
                --text: #0f172a;
                --muted: #475569;
                --accent: #0ea5e9;
                --ok: #059669;
                --warn: #b45309;
                --err: #b91c1c;
                --border: #e2e8f0;
            }
        }

        html, body {
            height: 100%;
        }

        body {
            margin: 0;
            font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
            background: var(--bg);
            color: var(--text);
            display: grid;
            place-items: start center;
        }

        .wrap {
            width: min(760px,94vw);
            margin: 14px auto;
        }

        h1 {
            font-size: clamp(1.25rem,1.5vw + 1rem,1.75rem);
            margin: 0 0 10px;
        }

        p.lead {
            color: var(--muted);
            margin-top: 0;
        }

        .grid {
            display: grid;
            gap: 16px;
            grid-template-columns: repeat(12,1fr);
        }

        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 16px;
        }

        .inputs, .outputs, .info, .dose {
            grid-column: span 12;
        }

        @media(min-width:900px) {
            .inputs {
                grid-column: span 7;
            }

            .outputs {
                grid-column: span 5;
            }
        }

        /* universal mobile adjustments */
        @media(max-width:600px) {
            .wrap {
                width: 100vw;
                margin: 0;
                padding: 0 6px;
            }

            body {
                overflow-x: hidden;
            }

            /* all inputs & pickers & textareas */
            input, select, textarea {
                padding: 6px 6px !important;
                font-size: 0.85rem !important;
            }

            /* specific patient column lock */
            #patientsBody input[type="time"],
            #patientsBody input[type="number"] {
                width: 85px;
                font-size: 0.80rem;
            }

            button.btn {
                padding: 8px 10px !important;
                font-size: 0.85rem !important;
            }

            table {
                display: block;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            #patientsBody td {
                font-size: 0.80rem;
                padding: 2px 4px;
            }

            #patientsBody span.muted, #patientsBody .chip {
                font-size: 0.70rem;
            }

            th {
                font-size: 0.75rem;
            }
        }

        .logo-link {
            display: inline-block;
            text-decoration: none;
        }

        .logo {
            width: clamp(140px, 30vw, 260px);
            height: auto;
            margin-bottom: 12px;
            opacity: 0;
            transform: scale(0.98);
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.25));
            transition: opacity 1.5s ease, transform 1.5s ease, filter 0.3s ease;
        }

        .fade-in {
            animation: logoFadeIn 1.6s ease forwards;
        }

        @keyframes logoFadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
                filter: blur(3px);
            }

            to {
                opacity: 1;
                transform: scale(1);
                filter: drop-shadow(0 3px 5px rgba(0,0,0,0.3));
            }
        }

        .logo:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.35));
        }

        @media (prefers-color-scheme: dark) {
            .logo {
                filter: drop-shadow(0 2px 4px rgba(255,255,255,0.1)) drop-shadow(0 0 6px rgba(255,255,255,0.05));
            }
        }


        /* layout utilities */
        .row {
            display: grid;
            gap: 12px;
            grid-template-columns: 1fr 1fr;
        }

        .column {
            display: grid;
            gap: 12px;
            grid-template-columns: repeat(5,1fr);
        }

        .column-2 {
            display: grid;
            gap: 12px;
            grid-template-columns: 1fr 1fr;
        }

        .column-3 {
            display: grid;
            gap: 12px;
            grid-template-columns: repeat(3,1fr);
        }

        .field {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        label {
            font-size: 0.9rem;
            color: var(--muted);
        }

        input, select, button, textarea {
            font: inherit;
            background: transparent;
            color: var(--text);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 10px 12px;
        }

            input[type="number"] {
                -moz-appearance: textfield;
            }

            input::-webkit-inner-spin-button, input::-webkit-outer-spin-button {
                display: none;
            }

        .btn {
            border: 1px solid var(--accent);
            color: var(--text);
            background: color-mix(in oklab,var(--accent) 12%,transparent);
            cursor: pointer;
            transition: .06s transform,.15s filter;
            font-weight: 600;
        }

            .btn:hover {
                filter: brightness(1.05);
            }

            .btn:active {
                transform: translateY(1px);
            }

            .btn.secondary {
                border-color: var(--border);
                background: transparent;
            }

        .stat {
            border: 1px dashed var(--border);
            border-radius: 14px;
            padding: 12px;
            display: grid;
            gap: 6px;
        }

            .stat .label {
                color: var(--muted);
                font-size: 0.9rem;
            }

            .stat .value {
                font-size: 1.25rem;
                font-variant-numeric: tabular-nums lining-nums;
            }

            .stat.ok {
                border-color: color-mix(in oklab,var(--ok) 40%,var(--border));
            }

            .stat.warn {
                border-color: color-mix(in oklab,var(--warn) 40%,var(--border));
            }

        .mono {
            font-family: ui-monospace,Menlo,Consolas,monospace;
        }

        .muted {
            color: var(--muted);
        }

        .hr {
            height: 1px;
            background: var(--border);
            margin: 16px 0;
        }

        .chips {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .chip {
            border: 1px solid var(--border);
            border-radius: 999px;
            padding: 6px 10px;
            font-size: 0.85rem;
            color: var(--muted);
        }
